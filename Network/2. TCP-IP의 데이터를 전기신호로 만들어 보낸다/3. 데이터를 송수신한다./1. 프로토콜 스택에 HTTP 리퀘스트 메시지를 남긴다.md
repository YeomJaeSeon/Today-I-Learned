# 프로토콜 스택에 HTTP 리퀘스트 메시지를 남긴다.
- connect(접속) 이후 어플리케이션은 데이터 송수신을 위해 `write`를 호출하여 프로토콜 스택에 건네준다.

## 프로토콜 스택은 일단 송신용 버퍼 메모리에 저장한다.
- 프로토콜 스택은 데이터를 바로 송신하는게 아닌 일단 송신용 버퍼 메모리에 저장한다.
- 왜? : **프로토콜 스택은 단지 어플리케이션에서 어떤 방식으로 데이터 송신을 의뢰하냐에 따라 데이터 송신이 결정되기 때문이다.**
  - 어플리케이션에서 1바이트씩 데이터 송신의뢰하면 프로토콜 스택은 1바이트씩 데이터를 송신. 그게아니라 데이터 1000바이트씩 송신의뢰하면 프로토콜 스택은 1000바이트씩 송신
  - 어플리케이션에서 프로토콜 스택으로 1바이트씩 송신의뢰하면 네트워크 이용 효율이 저하되기에 버퍼 메모리인 **송신용 버퍼 메모리**에 일단 저장하고 송신하는 것이다.

이 송신용 버퍼 메모리 크기(얼마나 저장하고 프로토콜 스택이 데이터 송신할까의 크기)는 어떻게 정할까? 기준은? 판단 요소는?

1. MTU, MSS의 크기에 따라
   - 한 패킷에 최대로 저장할 수 있는 크기(바이트)인 MTU(헤더포함), MSS(헤더 미포함)에 따라 송신 버퍼메모리 크기를 정할수 있다.
   - 클수록 네트워크 이용효율높아짐(=한 커넥션에서 많은 데이터 보낼수있음)
   - 클수록 버퍼에 데이터가 머무는 시간이 길어지기에 그만큼 전체적인 송신 지연이 존재함 (MSS가 2MB면 버퍼메모리에 2MB데이터가 모일때까지 기다리니 지연된다는 의미이다.)
2. 타이밍(타이머)
   - 어플리케이션에서 프로토콜 스택으로 송신 속도가 느려지면 전체적인 네트워크 지연시간이 커지기 때문에 MSS만큼 데이터가 모이지 않아도 송신을 실행 (프로토콜 스택 내부에 타이머가 있어서 시간 경과되면 버퍼 메모리 다 차지 않아도 패킷을 송신한다)
   - 타이밍 작을수록 네트워크 이용효율 낮아짐(= 커넥션수 가 많이 필요)

-> 시스템 상황에 따라 어떻게 판단할지 정하는게 좋다.
