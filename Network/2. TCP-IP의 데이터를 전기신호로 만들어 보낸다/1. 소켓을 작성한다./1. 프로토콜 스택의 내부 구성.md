# 프로토콜 스택의 내부 구성
- OS에 내장된 네트워크 제어용 소프트웨어인 **프로토콜 스택**과 네트워크용 하드웨어인 **LAN 어댑터**가 브라우저에서 받은 메시지를 서버에 송출한다.
- 그 전에 프로토콜 스택이 어떤것인지 이해하기 위해 내부 구성을 알아보자.

![프로토콜 스택 내부 구조.png](images%2F%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C%20%EC%8A%A4%ED%83%9D%20%EB%82%B4%EB%B6%80%20%EA%B5%AC%EC%A1%B0.png)
> 보통 위의 계층이 아래 계층에 작업을 의뢰하도록 만들어져있다. (아닌 경우도있다.)

## 네트워크 어플리케이션
- 위 그림의 맨위에 있음
- 브라우저, 웹서버, 메일서버등의 프로그램이 여기에 해당됨
- 여기부터 아래방향으로 데이터 송/수신 등의 일을 의뢰한다.
- 네트워크 어플리케이션 아래엔 Socket 라이브러리가 있고 그 안엔 리졸버가 있다
  - 리졸버: DNS서버에서 ip 조회하는 동작을 한다.

## OS내부
- **프로토콜 스택이 여기에 있다..**
- 프로토콜 스택 윗 부분에 **TCP 프로토콜을 사용하여 데이터 송수신을 담당하는 부분**과 **UDP 프로토콜을 사용하여 데이터 송수신을 담당하는 부분**이 있다.
  - 이 두 프로토콜이 네트워크 어플리케이션에서 보낸 의뢰를 받아 송수신동작을 실행한다.
  - 브라우저나 메일등의 일반적인 어플리케이션은 TCP
  - DNS서버에 대한 조회같은 **짧은** 제어용 데이터를 송수신하는 경우 UDP
- 그 아래에 IP프로토콜을 사용하여 패킷 송수신 동작을 제어하는 부분이 있따. (IP의 주된 역할이 패킷을 통신 상대까지 운반하는것이다.)
  - 패킷: 인터넷에서 데이터 운반할때 데이터를 작게 나눈 형태
  - IP안에는 ICMP, ARP라는 프로토콜을 다루는 부분이 포함되어있다.
    - ICMP: 패킷 운반할 때, 발생하는 오류 통지 및 제어용 메시지 통지
    - ARP: IP주소에 대흥하는 이더넷의 MAC주소를 조사 (이런게 있따..)

## 드라이버 소프트웨어
- LAN 드라이버 : 하드웨어인 LAN어뎁터를 제어

## 하드웨어
- LAN 어댑터: 실제 케이블에 대해 신호 송-수신하는 동작을 수행한다.